
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://teldh.github.io/ekeel/docs/codebase/EKEELVideoAnnotation/burst/weight/">
      
      
        <link rel="prev" href="../results_processor/">
      
      
        <link rel="next" href="../../config/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>weight - EKEEL - Empowering Knowledge Extraction to Empower Learners</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Serif+Pro:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Source Serif Pro";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#weight" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="EKEEL - Empowering Knowledge Extraction to Empower Learners" class="md-header__button md-logo" aria-label="EKEEL - Empowering Knowledge Extraction to Empower Learners" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EKEEL - Empowering Knowledge Extraction to Empower Learners
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              weight
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/teldh/ekeel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  Homepage

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../prerequisites/conda/" class="md-tabs__link">
          
  
  Deploy

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../extractor/" class="md-tabs__link">
          
  
  Codebase

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../prerequisites/mkdocs/" class="md-tabs__link">
        
  
    
  
  Mkdocs

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="EKEEL - Empowering Knowledge Extraction to Empower Learners" class="md-nav__button md-logo" aria-label="EKEEL - Empowering Knowledge Extraction to Empower Learners" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    EKEEL - Empowering Knowledge Extraction to Empower Learners
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/teldh/ekeel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homepage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deploy
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Deploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Local
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Local
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../prerequisites/conda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prerequisites
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../platforms/annotator/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../platforms/augmentator/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Augmentator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Remote
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Remote
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../prerequisites/linux-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prerequisites
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../remote/pull/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Codebase Update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../platforms/annotator/deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../platforms/augmentator/deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Augmentator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../platforms/annotator/transcriber/deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transcriber
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Codebase
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Codebase
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    EKEELVideoAnnotation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            EKEELVideoAnnotation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    burst
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            burst
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extractor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    extractor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kleinberg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kleinberg
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prototype/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prototype
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../results_processor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    results_processor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    weight
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    weight
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight" class="md-nav__link">
    <span class="md-ellipsis">
      weight
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner" class="md-nav__link">
    <span class="md-ellipsis">
      WeightAssigner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WeightAssigner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.burst_pairs" class="md-nav__link">
    <span class="md-ellipsis">
      burst_pairs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts" class="md-nav__link">
    <span class="md-ellipsis">
      bursts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts_weights" class="md-nav__link">
    <span class="md-ellipsis">
      bursts_weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.relations_weights" class="md-nav__link">
    <span class="md-ellipsis">
      relations_weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.detect_relations" class="md-nav__link">
    <span class="md-ellipsis">
      detect_relations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.from_burst_extractor" class="md-nav__link">
    <span class="md-ellipsis">
      from_burst_extractor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer" class="md-nav__link">
    <span class="md-ellipsis">
      WeightsNormalizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WeightsNormalizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_norm" class="md-nav__link">
    <span class="md-ellipsis">
      burst_norm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_results" class="md-nav__link">
    <span class="md-ellipsis">
      burst_results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_weight_matrix" class="md-nav__link">
    <span class="md-ellipsis">
      burst_weight_matrix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.normalize" class="md-nav__link">
    <span class="md-ellipsis">
      normalize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../connector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    connector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_4" >
        
          
          <label class="md-nav__link" for="__nav_3_1_4" id="__nav_3_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    database
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database/mongo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mongo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_5" >
        
          
          <label class="md-nav__link" for="__nav_3_1_5" id="__nav_3_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    embedding
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_5">
            <span class="md-nav__icon md-icon"></span>
            embedding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedding/cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cluster
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    env
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_7" >
        
          
          <label class="md-nav__link" for="__nav_3_1_7" id="__nav_3_1_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    forms
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_7">
            <span class="md-nav__icon md-icon"></span>
            forms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../forms/form/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    form
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../forms/mail/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mail
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../forms/user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    user
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_9" >
        
          
          <label class="md-nav__link" for="__nav_3_1_9" id="__nav_3_1_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    media
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_9">
            <span class="md-nav__icon md-icon"></span>
            media
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/audio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    audio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    segmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../media/video/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    video
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_10" >
        
          
          <label class="md-nav__link" for="__nav_3_1_10" id="__nav_3_1_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    metrics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_10">
            <span class="md-nav__icon md-icon"></span>
            metrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/agreement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    agreement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../metrics/metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    metrics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_11" >
        
          
          <label class="md-nav__link" for="__nav_3_1_11" id="__nav_3_1_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    misc_unused
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_11">
            <span class="md-nav__icon md-icon"></span>
            misc_unused
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/Method_01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Method_01
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/Method_02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Method_02
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/Method_03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Method_03
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/Method_04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Method_04
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/skos_synonyms_query/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    skos_synonyms_query
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc_unused/wikipe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wikipe
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_12" >
        
          
          <label class="md-nav__link" for="__nav_3_1_12" id="__nav_3_1_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    models
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_12">
            <span class="md-nav__icon md-icon"></span>
            models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/xgboost_adapter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xgboost_adapter
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_13" >
        
          
          <label class="md-nav__link" for="__nav_3_1_13" id="__nav_3_1_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ontology
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_13">
            <span class="md-nav__icon md-icon"></span>
            ontology
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ontology/rdf_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rdf_graph
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_14" >
        
          
          <label class="md-nav__link" for="__nav_3_1_14" id="__nav_3_1_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_14">
            <span class="md-nav__icon md-icon"></span>
            services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/NLP_API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NLP_API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_15" >
        
          
          <label class="md-nav__link" for="__nav_3_1_15" id="__nav_3_1_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    text_processor
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_15">
            <span class="md-nav__icon md-icon"></span>
            text_processor
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../text_processor/conll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    conll
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../text_processor/locales/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locales
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../text_processor/synonyms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    synonyms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../text_processor/words/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    words
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transcribe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transcribe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_17" >
        
          
          <label class="md-nav__link" for="__nav_3_1_17" id="__nav_3_1_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    utils
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_17">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/itertools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    itertools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    structures
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    EKEELVideoAugmentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            EKEELVideoAugmentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1" id="__nav_3_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    src
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1">
            <span class="md-nav__icon md-icon"></span>
            src
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_1_1" >
        
          
          <label class="md-nav__link" for="__nav_3_2_1_1" id="__nav_3_2_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    flask-server
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_1_1">
            <span class="md-nav__icon md-icon"></span>
            flask-server
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../EKEELVideoAugmentation/src/flask-server/data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../EKEELVideoAugmentation/src/flask-server/environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../EKEELVideoAugmentation/src/flask-server/handle_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    handle_data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../EKEELVideoAugmentation/src/flask-server/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    main
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../prerequisites/mkdocs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mkdocs
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight" class="md-nav__link">
    <span class="md-ellipsis">
      weight
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner" class="md-nav__link">
    <span class="md-ellipsis">
      WeightAssigner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WeightAssigner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.burst_pairs" class="md-nav__link">
    <span class="md-ellipsis">
      burst_pairs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts" class="md-nav__link">
    <span class="md-ellipsis">
      bursts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts_weights" class="md-nav__link">
    <span class="md-ellipsis">
      bursts_weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.relations_weights" class="md-nav__link">
    <span class="md-ellipsis">
      relations_weights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.detect_relations" class="md-nav__link">
    <span class="md-ellipsis">
      detect_relations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.from_burst_extractor" class="md-nav__link">
    <span class="md-ellipsis">
      from_burst_extractor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer" class="md-nav__link">
    <span class="md-ellipsis">
      WeightsNormalizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WeightsNormalizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_norm" class="md-nav__link">
    <span class="md-ellipsis">
      burst_norm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_results" class="md-nav__link">
    <span class="md-ellipsis">
      burst_results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_weight_matrix" class="md-nav__link">
    <span class="md-ellipsis">
      burst_weight_matrix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.normalize" class="md-nav__link">
    <span class="md-ellipsis">
      normalize
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div><h1 id="weight">Weight</h1>
<hr>


<div class="doc doc-object doc-module">



<a id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner" class="doc doc-heading">
            <code>WeightAssigner</code>


</h2>


    <div class="doc doc-contents ">


        <p>A class to detect relations between bursts and assign weights to these relations based on Allen's algebra.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts">bursts</a></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing the bursts. Every row represents a burst (with a unique ID as index).
The DataFrame must have the columns: ['keyword', 'start', 'end'].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.relations_weights" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.relations_weights">relations_weights</a></code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary that associates a weight to every relation in Allen's algebra.
The key-set must contain all the relations' names (inverse relations included):
'equals', 'before', 'after', 'meets', 'met-by', 'overlaps', 'overlapped-by',
'during', 'includes', 'starts', 'started-by', 'finishes', 'finished-by'.
If no dict is passed, the predefined weights will be used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.text_filename">text_filename</span></code></td>
            <td>
                  <code>(str, optional)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the file containing the book/chapter in plain text.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.burst_matrix">burst_matrix</span></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame consisting of a square matrix of burst weights (i.e., dimension = num_bursts x num_bursts).
Rows and columns have as labels the IDs of the bursts.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.burst_pairs" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.burst_pairs">burst_pairs</a></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame storing all the detected pairs of Allen-related bursts, in a suitable format for machine learning projects and Gantt interface.
Columns are: ['x', 'y', 'Bx_id', 'By_id', 'Bx_start', 'Bx_end', 'By_start', 'By_end', 'Rel'].</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.detect_relations" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.detect_relations">detect_relations</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect relations between bursts and assign weights to these relations.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._initialize_dataframes">_initialize_dataframes</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initialize the dataframes for burst matrix and burst pairs.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._prop_tol_gap">_prop_tol_gap</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Propagate tolerance gap for burst relations.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._store_weights">_store_weights</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Store weights for burst relations.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._equals">_equals</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'equals' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._finishes">_finishes</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'finishes' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._before">_before</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'before' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._after">_after</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'after' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._meets">_meets</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'meets' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._met_by">_met_by</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'met-by' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._overlaps">_overlaps</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'overlaps' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._overlapped_by">_overlapped_by</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'overlapped-by' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._during">_during</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'during' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._includes">_includes</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'includes' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._starts">_starts</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'starts' relation between bursts.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner._started_by">_started_by</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Detect 'started-by' relation between bursts.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>weight_assigner = WeightAssigner(bursts=filtered_bursts,
                                 relations_weights=rel_w,
                                 text_filename="chapter4.txt")
weight_assigner.detect_relations()
burst_pairs = weight_assigner.burst_pairs
bursts_weights = weight_assigner.bursts_weights.dataframe</p>






              <details class="quote">
                <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WeightAssigner</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    A class to detect relations between bursts and assign weights to these relations based on Allen's algebra.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    bursts : pandas.DataFrame</span>
<span class="sd">        DataFrame containing the bursts. Every row represents a burst (with a unique ID as index).</span>
<span class="sd">        The DataFrame must have the columns: ['keyword', 'start', 'end'].</span>
<span class="sd">    relations_weights : dict</span>
<span class="sd">        Dictionary that associates a weight to every relation in Allen's algebra.</span>
<span class="sd">        The key-set must contain all the relations' names (inverse relations included):</span>
<span class="sd">        'equals', 'before', 'after', 'meets', 'met-by', 'overlaps', 'overlapped-by',</span>
<span class="sd">        'during', 'includes', 'starts', 'started-by', 'finishes', 'finished-by'.</span>
<span class="sd">        If no dict is passed, the predefined weights will be used.</span>
<span class="sd">    text_filename : str, optional</span>
<span class="sd">        The name of the file containing the book/chapter in plain text.</span>
<span class="sd">    burst_matrix : pandas.DataFrame</span>
<span class="sd">        DataFrame consisting of a square matrix of burst weights (i.e., dimension = num_bursts x num_bursts).</span>
<span class="sd">        Rows and columns have as labels the IDs of the bursts.</span>
<span class="sd">    burst_pairs : pandas.DataFrame</span>
<span class="sd">        DataFrame storing all the detected pairs of Allen-related bursts, in a suitable format for machine learning projects and Gantt interface.</span>
<span class="sd">        Columns are: ['x', 'y', 'Bx_id', 'By_id', 'Bx_start', 'Bx_end', 'By_start', 'By_end', 'Rel'].</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    detect_relations()</span>
<span class="sd">        Detect relations between bursts and assign weights to these relations.</span>
<span class="sd">    _initialize_dataframes()</span>
<span class="sd">        Initialize the dataframes for burst matrix and burst pairs.</span>
<span class="sd">    _prop_tol_gap()</span>
<span class="sd">        Propagate tolerance gap for burst relations.</span>
<span class="sd">    _store_weights()</span>
<span class="sd">        Store weights for burst relations.</span>
<span class="sd">    _equals()</span>
<span class="sd">        Detect 'equals' relation between bursts.</span>
<span class="sd">    _finishes()</span>
<span class="sd">        Detect 'finishes' relation between bursts.</span>
<span class="sd">    _before()</span>
<span class="sd">        Detect 'before' relation between bursts.</span>
<span class="sd">    _after()</span>
<span class="sd">        Detect 'after' relation between bursts.</span>
<span class="sd">    _meets()</span>
<span class="sd">        Detect 'meets' relation between bursts.</span>
<span class="sd">    _met_by()</span>
<span class="sd">        Detect 'met-by' relation between bursts.</span>
<span class="sd">    _overlaps()</span>
<span class="sd">        Detect 'overlaps' relation between bursts.</span>
<span class="sd">    _overlapped_by()</span>
<span class="sd">        Detect 'overlapped-by' relation between bursts.</span>
<span class="sd">    _during()</span>
<span class="sd">        Detect 'during' relation between bursts.</span>
<span class="sd">    _includes()</span>
<span class="sd">        Detect 'includes' relation between bursts.</span>
<span class="sd">    _starts()</span>
<span class="sd">        Detect 'starts' relation between bursts.</span>
<span class="sd">    _started_by()</span>
<span class="sd">        Detect 'started-by' relation between bursts.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    weight_assigner = WeightAssigner(bursts=filtered_bursts,</span>
<span class="sd">                                     relations_weights=rel_w,</span>
<span class="sd">                                     text_filename="chapter4.txt")</span>
<span class="sd">    weight_assigner.detect_relations()</span>
<span class="sd">    burst_pairs = weight_assigner.burst_pairs</span>
<span class="sd">    bursts_weights = weight_assigner.bursts_weights.dataframe</span>
<span class="sd">    """</span>

    <span class="c1"># predefined weights (they also include inverse relations)</span>
    <span class="n">RELATIONS_WEIGHTS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'equals'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'before'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'after'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'meets'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">'met-by'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                         <span class="s1">'overlaps'</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span> <span class="s1">'overlapped-by'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'during'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">'includes'</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
                         <span class="s1">'starts'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">'started-by'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'finishes'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'finished-by'</span><span class="p">:</span> <span class="mi">8</span><span class="p">}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bursts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">relations_weights</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Initializes the object from a dataframe storing the concepts' bursts in a</span>
<span class="sd">        text (this can be extracted by a BurstExtractor) and a dictionary containing</span>
<span class="sd">        the weights for Allen's algebra's relations.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bursts : pandas.DataFrame</span>
<span class="sd">            A dataframe possibly generated by a BurstExtractor.</span>
<span class="sd">        relations_weights : dict, optional</span>
<span class="sd">            A dictionary containing weights associated to every possible relation.</span>
<span class="sd">            If no dictionary is passed, the predefined weights will be used.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        """</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span> <span class="o">=</span> <span class="n">bursts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span> <span class="o">=</span> <span class="n">relations_weights</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">RELATIONS_WEIGHTS</span>

        <span class="c1"># initialize the two final data structures</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_dataframes</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_burst_extractor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fitted_burst_extractor</span><span class="p">:</span> <span class="n">BurstExtractor</span><span class="p">,</span>
                             <span class="n">relations_weights</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Initializes the object from a BurstExtractor object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        fitted_burst_extractor : BurstExtractor</span>
<span class="sd">            A BurstExtractor object with already computed bursts.</span>
<span class="sd">        relations_weights : dict, optional</span>
<span class="sd">            A dictionary containing weights associated to every possible relation.</span>
<span class="sd">            If no dictionary is passed, the predefined weights will be used.</span>
<span class="sd">        level : int, optional</span>
<span class="sd">            The level of bursts to consider (default is 1).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        WeightAssigner</span>
<span class="sd">            An instance of the WeightAssigner class.</span>
<span class="sd">        """</span>

        <span class="n">bursts</span> <span class="o">=</span> <span class="n">fitted_burst_extractor</span><span class="o">.</span><span class="n">filter_bursts</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">bursts</span><span class="p">,</span> <span class="n">relations_weights</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_initialize_dataframes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Initialize the final data structures as empty dataframes or reset them to empty.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        """</span>

        <span class="c1"># initialize the final square matrix of weights</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_matrix</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span>
                                          <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
                                          <span class="n">columns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

        <span class="c1"># initialize the dataset for the machine learning project and for gantt interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">'x'</span><span class="p">,</span> <span class="s1">'y'</span><span class="p">,</span>
                                                  <span class="s1">'Bx_id'</span><span class="p">,</span> <span class="s1">'By_id'</span><span class="p">,</span>
                                                  <span class="s1">'Bx_start'</span><span class="p">,</span> <span class="s1">'Bx_end'</span><span class="p">,</span>
                                                  <span class="s1">'By_start'</span><span class="p">,</span> <span class="s1">'By_end'</span><span class="p">,</span>
                                                  <span class="s1">'Rel'</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">detect_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_gap</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">find_also_inverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Detects which relations exist between bursts, computes the weight according</span>
<span class="sd">        to the relations_weights schema, and stores it in the final data structure.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        max_gap : int, optional</span>
<span class="sd">            A maximum number of sentences between two bursts after which no relation will be assigned (default is 10).</span>
<span class="sd">            It is used to reduce the number of 'before' and 'after' relations.</span>
<span class="sd">        alpha : float, optional</span>
<span class="sd">            Proportionality coefficient (default is 0.05). It is multiplied by the total length of the two bursts.</span>
<span class="sd">        find_also_inverse : bool, optional</span>
<span class="sd">            If False (default), only direct relations are detected. If True, the procedure will also</span>
<span class="sd">            detect and assign weights to inverse relations of Allen's algebra.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        weight_assigner = WeightAssigner(bursts=filtered_bursts,</span>
<span class="sd">                                         relations_weights=rel_w)</span>
<span class="sd">        weight_assigner.detect_relations(max_gap=10, alpha=0.05, find_also_inverse=True)</span>
<span class="sd">        burst_pairs = weight_assigner.burst_pairs</span>
<span class="sd">        bursts_weights = weight_assigner.bursts_weights.dataframe</span>
<span class="sd">        """</span>

        <span class="c1"># reset the two final dataframes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_dataframes</span><span class="p">()</span>

        <span class="c1"># loop over all the rows in the dataframe (i.e. over all the bursts)</span>
        <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">word1</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span>
            <span class="n">start1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'start'</span><span class="p">])</span>
            <span class="n">end1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'end'</span><span class="p">])</span>

            <span class="c1"># among all the bursts, subsect only bursts that are not 'too before' or 'too after'</span>
            <span class="c1"># (considering a max admissible gap)</span>
            <span class="c1"># subsection = bursts.loc[(bursts['start']&lt;(end1+max_gap)) &amp; (bursts['end']&gt;(start1-max_gap))]</span>

            <span class="c1"># consider only the bursts of words different from the current word</span>
            <span class="n">subsection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">!=</span> <span class="n">word1</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

            <span class="c1"># loop over all the candidate bursts</span>
            <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">row2</span> <span class="ow">in</span> <span class="n">subsection</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>

                <span class="n">word2</span> <span class="o">=</span> <span class="n">row2</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span>
                <span class="n">start2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row2</span><span class="p">[</span><span class="s1">'start'</span><span class="p">])</span>
                <span class="n">end2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row2</span><span class="p">[</span><span class="s1">'end'</span><span class="p">])</span>

                <span class="c1"># compute the specific tolerance gap</span>
                <span class="n">tol_gap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_tol_gap</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>

                <span class="c1"># check if there is a relationship and assign the weight</span>

                <span class="c1">### direct relations</span>

                <span class="c1"># equals</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_equals</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'equals'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># finishes</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finishes</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'finishes'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># starts</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_starts</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'starts'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># includes</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_includes</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'includes'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># meets</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meets</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'meets'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># overlaps</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overlaps</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'overlaps'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># before</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_before</span><span class="p">(</span><span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">,</span> <span class="n">max_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'before'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1">### inverse relations</span>

                <span class="k">if</span> <span class="n">find_also_inverse</span><span class="p">:</span>

                    <span class="c1"># met-by</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_met_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'met-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                           <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                    <span class="c1"># overlapped-by</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overlapped_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'overlapped-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                           <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                    <span class="c1"># during</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_during</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'during'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                           <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                    <span class="c1"># started-by</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_started_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'started-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                           <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                    <span class="c1"># finished-by</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'finished-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                           <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                    <span class="c1"># after</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">,</span> <span class="n">max_gap</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'after'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                           <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>


    <span class="c1"># HELPER METHODS FOR detect_relations: _prop_tol_gap; _store_weight</span>

    <span class="k">def</span> <span class="nf">_prop_tol_gap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Returns a gap that is proportional to the lengths of two bursts.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        start1 : int</span>
<span class="sd">            The start index of the first burst.</span>
<span class="sd">        end1 : int</span>
<span class="sd">            The end index of the first burst.</span>
<span class="sd">        start2 : int</span>
<span class="sd">            The start index of the second burst.</span>
<span class="sd">        end2 : int</span>
<span class="sd">            The end index of the second burst.</span>
<span class="sd">        alpha : float, optional</span>
<span class="sd">            Proportionality coefficient (default is 0.05). It is multiplied by the total length of the two bursts.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            The proportional tolerance gap.</span>
<span class="sd">        """</span>

        <span class="c1"># add 1 because the last sentence is included in the burst</span>
        <span class="n">length1</span> <span class="o">=</span> <span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">start1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">length2</span> <span class="o">=</span> <span class="p">(</span><span class="n">end2</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1"># compute the specific tol_gap for these two bursts</span>
        <span class="n">tol_gap</span> <span class="o">=</span> <span class="p">(</span><span class="n">length1</span> <span class="o">+</span> <span class="n">length2</span><span class="p">)</span> <span class="o">*</span> <span class="n">alpha</span>

        <span class="k">return</span> <span class="n">tol_gap</span>

    <span class="k">def</span> <span class="nf">_store_weight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">relation</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">word1</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">word2</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                      <span class="n">start2</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">end2</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index1</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index2</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Store the weight of a detected relation between bursts.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        relation : str</span>
<span class="sd">            The type of relation detected.</span>
<span class="sd">        word1 : str</span>
<span class="sd">            The keyword of the first burst.</span>
<span class="sd">        word2 : str</span>
<span class="sd">            The keyword of the second burst.</span>
<span class="sd">        start1 : int</span>
<span class="sd">            The start index of the first burst.</span>
<span class="sd">        end1 : int</span>
<span class="sd">            The end index of the first burst.</span>
<span class="sd">        start2 : int</span>
<span class="sd">            The start index of the second burst.</span>
<span class="sd">        end2 : int</span>
<span class="sd">            The end index of the second burst.</span>
<span class="sd">        index1 : int</span>
<span class="sd">            The index of the first burst in the dataframe.</span>
<span class="sd">        index2 : int</span>
<span class="sd">            The index of the second burst in the dataframe.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>
<span class="sd">        """</span>

        <span class="c1"># append the relationship at the end of the dataframe of burst pairs</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span>
                                      <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">,</span>
                                      <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">relation</span><span class="p">]</span>

        <span class="c1"># keep the weight in the final data structure only if it's greater than the currently stored weight</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span><span class="p">[</span><span class="n">relation</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">]:</span>
            <span class="c1"># add weight in the matrix</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_burst_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span><span class="p">[</span><span class="n">relation</span><span class="p">]</span>

    <span class="c1"># HELPER METHODS FOR DEFINING RULES</span>

    <span class="k">def</span> <span class="nf">_equals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_finishes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">start1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">end1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_during</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_meets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_overlaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end2</span> <span class="o">-</span> <span class="n">end1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start2</span> <span class="o">-</span> <span class="n">start1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">,</span> <span class="n">max_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start2</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">end1</span> <span class="o">+</span> <span class="n">tol_gap</span><span class="p">))</span> <span class="o">&amp;</span>
                <span class="p">((</span><span class="n">start2</span> <span class="o">-</span> <span class="n">end1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_met_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">start1</span> <span class="o">&gt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>  <span class="c1"># FIXME: anche se le inverse non sono state quasi mai usate, provare ad eliminare questa regola (non si verifica in alcuni casi)</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_overlapped_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&gt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_includes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&gt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_started_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">end1</span> <span class="o">&gt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_finished_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&lt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="n">end1</span> <span class="o">&gt;</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">start1</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">tol_gap</span><span class="p">)</span> <span class="o">&amp;</span>
                <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">end1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tol_gap</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">,</span> <span class="n">max_gap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">""""""</span>
        <span class="k">return</span> <span class="p">((</span><span class="n">start1</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">end2</span> <span class="o">+</span> <span class="n">tol_gap</span><span class="p">))</span> <span class="o">&amp;</span>
                <span class="p">((</span><span class="n">start1</span> <span class="o">-</span> <span class="n">end2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_gap</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bursts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter of the input dataframe containing the bursts."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">relations_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter of the dictionary containing the weights for all relations in Allen's algebra"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bursts_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter of the final dataframe containing the weights between all bursts."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_matrix</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">burst_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter of the final dataframe containing pairs of related bursts in the format needed for machine learning project."""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">"WeightAssigner(bursts=</span><span class="si">{}</span><span class="s2">, relations_weights=</span><span class="si">{}</span><span class="s2">)"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">),</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">"WeightAssigner object. Input bursts (only first 5 rows):</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">,</span><span class="se">\n</span><span class="s2">relations_weights:</span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">head</span><span class="p">()),</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.burst_pairs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">burst_pairs</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter of the final dataframe containing pairs of related bursts in the format needed for machine learning project.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bursts</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter of the input dataframe containing the bursts.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.bursts_weights" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">bursts_weights</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter of the final dataframe containing the weights between all bursts.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.relations_weights" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">relations_weights</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter of the dictionary containing the weights for all relations in Allen's algebra</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">bursts</span><span class="p">,</span> <span class="n">relations_weights</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initializes the object from a dataframe storing the concepts' bursts in a
text (this can be extracted by a BurstExtractor) and a dictionary containing
the weights for Allen's algebra's relations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bursts</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dataframe possibly generated by a BurstExtractor.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>relations_weights</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing weights associated to every possible relation.
If no dictionary is passed, the predefined weights will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bursts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">relations_weights</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Initializes the object from a dataframe storing the concepts' bursts in a</span>
<span class="sd">    text (this can be extracted by a BurstExtractor) and a dictionary containing</span>
<span class="sd">    the weights for Allen's algebra's relations.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bursts : pandas.DataFrame</span>
<span class="sd">        A dataframe possibly generated by a BurstExtractor.</span>
<span class="sd">    relations_weights : dict, optional</span>
<span class="sd">        A dictionary containing weights associated to every possible relation.</span>
<span class="sd">        If no dictionary is passed, the predefined weights will be used.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>
<span class="sd">    """</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span> <span class="o">=</span> <span class="n">bursts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_relations_weights</span> <span class="o">=</span> <span class="n">relations_weights</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">RELATIONS_WEIGHTS</span>

    <span class="c1"># initialize the two final data structures</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_dataframes</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.detect_relations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">detect_relations</span><span class="p">(</span><span class="n">max_gap</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">find_also_inverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Detects which relations exist between bursts, computes the weight according
to the relations_weights schema, and stores it in the final data structure.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>max_gap</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A maximum number of sentences between two bursts after which no relation will be assigned (default is 10).
It is used to reduce the number of 'before' and 'after' relations.</p>
              </div>
            </td>
            <td>
                  <code>10</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>alpha</code>
            </td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Proportionality coefficient (default is 0.05). It is multiplied by the total length of the two bursts.</p>
              </div>
            </td>
            <td>
                  <code>0.05</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>find_also_inverse</code>
            </td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If False (default), only direct relations are detected. If True, the procedure will also
detect and assign weights to inverse relations of Allen's algebra.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>weight_assigner = WeightAssigner(bursts=filtered_bursts,
                                 relations_weights=rel_w)
weight_assigner.detect_relations(max_gap=10, alpha=0.05, find_also_inverse=True)
burst_pairs = weight_assigner.burst_pairs
bursts_weights = weight_assigner.bursts_weights.dataframe</p>

            <details class="quote">
              <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">detect_relations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_gap</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">find_also_inverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Detects which relations exist between bursts, computes the weight according</span>
<span class="sd">    to the relations_weights schema, and stores it in the final data structure.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_gap : int, optional</span>
<span class="sd">        A maximum number of sentences between two bursts after which no relation will be assigned (default is 10).</span>
<span class="sd">        It is used to reduce the number of 'before' and 'after' relations.</span>
<span class="sd">    alpha : float, optional</span>
<span class="sd">        Proportionality coefficient (default is 0.05). It is multiplied by the total length of the two bursts.</span>
<span class="sd">    find_also_inverse : bool, optional</span>
<span class="sd">        If False (default), only direct relations are detected. If True, the procedure will also</span>
<span class="sd">        detect and assign weights to inverse relations of Allen's algebra.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    weight_assigner = WeightAssigner(bursts=filtered_bursts,</span>
<span class="sd">                                     relations_weights=rel_w)</span>
<span class="sd">    weight_assigner.detect_relations(max_gap=10, alpha=0.05, find_also_inverse=True)</span>
<span class="sd">    burst_pairs = weight_assigner.burst_pairs</span>
<span class="sd">    bursts_weights = weight_assigner.bursts_weights.dataframe</span>
<span class="sd">    """</span>

    <span class="c1"># reset the two final dataframes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_dataframes</span><span class="p">()</span>

    <span class="c1"># loop over all the rows in the dataframe (i.e. over all the bursts)</span>
    <span class="k">for</span> <span class="n">index1</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">word1</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span>
        <span class="n">start1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'start'</span><span class="p">])</span>
        <span class="n">end1</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">'end'</span><span class="p">])</span>

        <span class="c1"># among all the bursts, subsect only bursts that are not 'too before' or 'too after'</span>
        <span class="c1"># (considering a max admissible gap)</span>
        <span class="c1"># subsection = bursts.loc[(bursts['start']&lt;(end1+max_gap)) &amp; (bursts['end']&gt;(start1-max_gap))]</span>

        <span class="c1"># consider only the bursts of words different from the current word</span>
        <span class="n">subsection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">!=</span> <span class="n">word1</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="c1"># loop over all the candidate bursts</span>
        <span class="k">for</span> <span class="n">index2</span><span class="p">,</span> <span class="n">row2</span> <span class="ow">in</span> <span class="n">subsection</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>

            <span class="n">word2</span> <span class="o">=</span> <span class="n">row2</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span>
            <span class="n">start2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row2</span><span class="p">[</span><span class="s1">'start'</span><span class="p">])</span>
            <span class="n">end2</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row2</span><span class="p">[</span><span class="s1">'end'</span><span class="p">])</span>

            <span class="c1"># compute the specific tolerance gap</span>
            <span class="n">tol_gap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prop_tol_gap</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span>

            <span class="c1"># check if there is a relationship and assign the weight</span>

            <span class="c1">### direct relations</span>

            <span class="c1"># equals</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_equals</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'equals'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1"># finishes</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finishes</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'finishes'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1"># starts</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_starts</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'starts'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1"># includes</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_includes</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'includes'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1"># meets</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meets</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'meets'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1"># overlaps</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overlaps</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'overlaps'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1"># before</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_before</span><span class="p">(</span><span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">,</span> <span class="n">max_gap</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'before'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                   <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

            <span class="c1">### inverse relations</span>

            <span class="k">if</span> <span class="n">find_also_inverse</span><span class="p">:</span>

                <span class="c1"># met-by</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_met_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'met-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># overlapped-by</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overlapped_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'overlapped-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># during</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_during</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'during'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># started-by</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_started_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'started-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># finished-by</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_finished_by</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span> <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'finished-by'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>

                <span class="c1"># after</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_after</span><span class="p">(</span><span class="n">start1</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">tol_gap</span><span class="p">,</span> <span class="n">max_gap</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_store_weight</span><span class="p">(</span><span class="s1">'after'</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">,</span> <span class="n">start1</span><span class="p">,</span> <span class="n">end1</span><span class="p">,</span>
                                       <span class="n">start2</span><span class="p">,</span> <span class="n">end2</span><span class="p">,</span> <span class="n">index1</span><span class="p">,</span> <span class="n">index2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner.from_burst_extractor" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">from_burst_extractor</span><span class="p">(</span><span class="n">fitted_burst_extractor</span><span class="p">,</span> <span class="n">relations_weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Initializes the object from a BurstExtractor object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fitted_burst_extractor</code>
            </td>
            <td>
                  <code><span title="burst.extractor.BurstExtractor">BurstExtractor</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A BurstExtractor object with already computed bursts.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>relations_weights</code>
            </td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing weights associated to every possible relation.
If no dictionary is passed, the predefined weights will be used.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>level</code>
            </td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The level of bursts to consider (default is 1).</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightAssigner">WeightAssigner</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the WeightAssigner class.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_burst_extractor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">fitted_burst_extractor</span><span class="p">:</span> <span class="n">BurstExtractor</span><span class="p">,</span>
                         <span class="n">relations_weights</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Initializes the object from a BurstExtractor object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    fitted_burst_extractor : BurstExtractor</span>
<span class="sd">        A BurstExtractor object with already computed bursts.</span>
<span class="sd">    relations_weights : dict, optional</span>
<span class="sd">        A dictionary containing weights associated to every possible relation.</span>
<span class="sd">        If no dictionary is passed, the predefined weights will be used.</span>
<span class="sd">    level : int, optional</span>
<span class="sd">        The level of bursts to consider (default is 1).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    WeightAssigner</span>
<span class="sd">        An instance of the WeightAssigner class.</span>
<span class="sd">    """</span>

    <span class="n">bursts</span> <span class="o">=</span> <span class="n">fitted_burst_extractor</span><span class="o">.</span><span class="n">filter_bursts</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">bursts</span><span class="p">,</span> <span class="n">relations_weights</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer" class="doc doc-heading">
            <code>WeightsNormalizer</code>


</h2>


    <div class="doc doc-contents ">


        <p>Creates objects that compute the Normalized Relation Weight (NRW) for a given burst matrix.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.bursts">bursts</span></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing a burst for each row.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_pairs">burst_pairs</span></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing pairs of related bursts.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_weight_matrix" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_weight_matrix">burst_weight_matrix</a></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame constructed from the weight-matrix generated from BurstAssigner.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_norm" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_norm">burst_norm</a></code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame with size: num_concepts x num_concepts, initialized with zeros.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.normalize" href="#/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.normalize">normalize</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Normalize the burst weight matrix using the specified formula.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer._total_length">_total_length</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Compute the total length of bursts for a given concept.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer._word_frequency">_word_frequency</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Compute the frequency of a concept in the text.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>weight_norm = WeightsNormalizer(burst_results=filtered_bursts,
                                burst_pairs=burst_pairs,
                                burst_weight_matrix=burst_weight_matrix)
weight_norm.normalize(formula='original')
normalized_weights = weight_norm.burst_norm.dataframe
normalized_weights = normalized_weights.round(decimals=3)</p>






              <details class="quote">
                <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WeightsNormalizer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Creates objects that compute the Normalized Relation Weight (NRW) for a given burst matrix.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    bursts : pandas.DataFrame</span>
<span class="sd">        DataFrame containing a burst for each row.</span>
<span class="sd">    burst_pairs : pandas.DataFrame</span>
<span class="sd">        DataFrame containing pairs of related bursts.</span>
<span class="sd">    burst_weight_matrix : pandas.DataFrame</span>
<span class="sd">        DataFrame constructed from the weight-matrix generated from BurstAssigner.</span>
<span class="sd">    burst_norm : pandas.DataFrame</span>
<span class="sd">        DataFrame with size: num_concepts x num_concepts, initialized with zeros.</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">    normalize(formula='original')</span>
<span class="sd">        Normalize the burst weight matrix using the specified formula.</span>
<span class="sd">    _total_length(concept)</span>
<span class="sd">        Compute the total length of bursts for a given concept.</span>
<span class="sd">    _word_frequency(concept)</span>
<span class="sd">        Compute the frequency of a concept in the text.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    weight_norm = WeightsNormalizer(burst_results=filtered_bursts,</span>
<span class="sd">                                    burst_pairs=burst_pairs,</span>
<span class="sd">                                    burst_weight_matrix=burst_weight_matrix)</span>
<span class="sd">    weight_norm.normalize(formula='original')</span>
<span class="sd">    normalized_weights = weight_norm.burst_norm.dataframe</span>
<span class="sd">    normalized_weights = normalized_weights.round(decimals=3)</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bursts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">burst_pairs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">burst_weight_matrix</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Initialize the WeightsNormalizer object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        bursts : pandas.DataFrame</span>
<span class="sd">            DataFrame containing a burst for each row.</span>
<span class="sd">        burst_pairs : pandas.DataFrame</span>
<span class="sd">            DataFrame containing pairs of related bursts.</span>
<span class="sd">        burst_weight_matrix : pandas.DataFrame</span>
<span class="sd">            DataFrame constructed from the weight-matrix generated from BurstAssigner.</span>
<span class="sd">        """</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span> <span class="o">=</span> <span class="n">bursts</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span> <span class="o">=</span> <span class="n">burst_pairs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span> <span class="o">=</span> <span class="n">burst_weight_matrix</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># prepare a dataset with size: num_concepts x num_concepts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span>
                                        <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span>
                                        <span class="n">columns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

        <span class="c1"># TODO SE2020: potenzialmente da eliminare in PRET sempre per le stesse ragioni (serve per trovare le frequenze nel testo se non vengono forniti in input dati relativi all'analisi linguistica come quelli contenuti nel conll)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_text_filename</span> <span class="o">=</span> <span class="s2">""</span>

    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="o">=</span><span class="s1">'original'</span><span class="p">,</span> <span class="n">occ_index_file</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Normalize the burst weight matrix using the specified formula.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        formula : str, optional</span>
<span class="sd">            Type of normalizing formula. Possible values: 'original', 'modified', 'marzo2019_1', 'marzo2019_2'.</span>
<span class="sd">            Default is 'original'.</span>
<span class="sd">        occ_index_file : str, optional</span>
<span class="sd">            Path to the file containing the occurrence index with the following columns:</span>
<span class="sd">            "Lemma", "idFrase", "idParolaStart".</span>
<span class="sd">            If no value is passed, frequencies will be computed using NLTK text processing tools.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        weight_norm = WeightsNormalizer(burst_results=filtered_bursts,</span>
<span class="sd">                                        burst_pairs=burst_pairs,</span>
<span class="sd">                                        burst_weight_matrix=burst_weight_matrix)</span>
<span class="sd">        weight_norm.normalize(formula='original')</span>
<span class="sd">        normalized_weights = weight_norm.burst_norm.dataframe</span>
<span class="sd">        normalized_weights = normalized_weights.round(decimals=3)</span>
<span class="sd">        """</span>
        <span class="k">if</span> <span class="n">formula</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'original'</span><span class="p">,</span> <span class="s1">'modified'</span><span class="p">,</span> <span class="s1">'marzo2019_1'</span><span class="p">,</span> <span class="s1">'marzo2019_2'</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Error: the argument 'formula' must be either 'original' or 'modified'."</span><span class="p">)</span>

        <span class="c1"># reset dataframe to zeros if any value has been modified during a first call of the function</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="c1"># precompute the word frequencies in their bursts</span>
        <span class="k">for</span> <span class="n">burst_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'start'</span><span class="p">]</span>
            <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'end'</span><span class="p">]</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_word_frequency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'keyword'</span><span class="p">],</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span>
                                        <span class="n">occ_index_file</span><span class="p">)</span>
            <span class="c1"># add the freq in a column of the same dataframe</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'word freq'</span><span class="p">]</span> <span class="o">=</span> <span class="n">freq</span>

        <span class="c1"># precompute the total length of bursts of each word</span>
        <span class="n">tot_burst_len</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
            <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_total_length</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

        <span class="c1"># main body of the method: compare bursts and assign a normalized weight</span>

        <span class="c1"># for each word X</span>
        <span class="k">for</span> <span class="n">word_X</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>

            <span class="c1"># retrieve the list of indexes in the bursts df assigned to the bursts of word X</span>
            <span class="n">bursts_X_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_X</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

            <span class="c1"># for each burst of word X</span>
            <span class="k">for</span> <span class="n">burst_X_i</span> <span class="ow">in</span> <span class="n">bursts_X_indexes</span><span class="p">:</span>
                <span class="c1"># don't consider the current burst if the entire row is zero</span>
                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                    <span class="k">pass</span>

                <span class="n">other_words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="n">other_words</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">word_X</span><span class="p">)</span>

                <span class="c1"># for each word different from word X</span>
                <span class="k">for</span> <span class="n">word_Y</span> <span class="ow">in</span> <span class="n">other_words</span><span class="p">:</span>
                    <span class="c1"># retrieve the list of indexes in the df assigned to the bursts of word Y</span>
                    <span class="n">bursts_Y_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_Y</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

                    <span class="c1"># for each burst of this second word Y</span>
                    <span class="k">for</span> <span class="n">burst_Y_j</span> <span class="ow">in</span> <span class="n">bursts_Y_indexes</span><span class="p">:</span>
                        <span class="c1"># don't consider the current burst if the entire column is zero</span>
                        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="p">[</span><span class="n">burst_Y_j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                            <span class="k">pass</span>

                        <span class="c1"># if the two bursts are related:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">,</span> <span class="n">burst_Y_j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                            <span class="c1"># retrieve the weight and freqs</span>
                            <span class="n">relation_weight_BX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">,</span> <span class="n">burst_Y_j</span><span class="p">]</span>
                            <span class="n">freq_BX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">,</span> <span class="s1">'word freq'</span><span class="p">]</span>
                            <span class="n">freq_BY</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_Y_j</span><span class="p">,</span> <span class="s1">'word freq'</span><span class="p">]</span>

                            <span class="c1"># compute NRW using the chosen formula</span>
                            <span class="k">if</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'original'</span><span class="p">:</span>
                                <span class="n">NRW</span> <span class="o">=</span> <span class="p">(</span><span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BX</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_X</span><span class="p">])</span> <span class="o">*</span>
                                       <span class="p">(</span><span class="n">freq_BY</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_Y</span><span class="p">]))</span>
<span class="w">                                </span><span class="sd">"""</span>
<span class="sd">                                # per dare più peso a i pesi rispetto a lunghezze e frequenze</span>
<span class="sd">                                NRW = relation_weight_BX * ( (freq_BX / tot_burst_len[word_X]) +</span>
<span class="sd">                                       (freq_BY / tot_burst_len[word_Y])) </span>

<span class="sd">                                # per esaltare le parole meno frequenti</span>
<span class="sd">                                NRW = relation_weight_BX * ( (tot_burst_len[word_X] / freq_BX) +</span>
<span class="sd">                                       (tot_burst_len[word_Y] / freq_BY)) </span>
<span class="sd">                                """</span>
                            <span class="k">elif</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'modified'</span><span class="p">:</span>
                                <span class="c1"># find total number of bursts of these words</span>
                                <span class="c1"># TODO: (OPTIM) move it outside the loop</span>
                                <span class="n">num_bursts_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_X</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">num_bursts_Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_Y</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">NRW</span> <span class="o">=</span> <span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">((</span><span class="n">freq_BX</span> <span class="o">*</span> <span class="n">num_bursts_X</span><span class="p">)</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_X</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span>
                                            <span class="p">(</span><span class="n">freq_BY</span> <span class="o">*</span> <span class="n">num_bursts_Y</span><span class="p">)</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_Y</span><span class="p">])</span>

                            <span class="k">elif</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'marzo2019_1'</span><span class="p">:</span>
                                <span class="c1"># freq(Y, Bj) / length of the single burst of Y under examination (i.e. BYj)</span>
                                <span class="n">BYj_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single_burst_length</span><span class="p">(</span><span class="n">burst_Y_j</span><span class="p">)</span>
                                <span class="n">NRW</span> <span class="o">=</span> <span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BX</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_X</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BY</span> <span class="o">/</span> <span class="n">BYj_len</span><span class="p">)</span>

                            <span class="k">elif</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'marzo2019_2'</span><span class="p">:</span>
                                <span class="c1"># similar to the previous but also for BXi</span>
                                <span class="n">BXi_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single_burst_length</span><span class="p">(</span><span class="n">burst_X_i</span><span class="p">)</span>
                                <span class="n">BYj_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single_burst_length</span><span class="p">(</span><span class="n">burst_Y_j</span><span class="p">)</span>
                                <span class="n">NRW</span> <span class="o">=</span> <span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BX</span> <span class="o">/</span> <span class="n">BXi_len</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BY</span> <span class="o">/</span> <span class="n">BYj_len</span><span class="p">)</span>


                            <span class="c1"># update the final matrix</span>
                            <span class="c1"># (i.e. sum the NRW between the current burst of word X</span>
                            <span class="c1"># and its related burst of word Y to the already stored weight between word X and word Y)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">word_X</span><span class="p">,</span> <span class="n">word_Y</span><span class="p">]</span> <span class="o">+=</span> <span class="n">NRW</span>

    <span class="k">def</span> <span class="nf">_total_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyword</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Normalize the burst weight matrix using the specified formula.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        formula : str, optional</span>
<span class="sd">            Type of normalizing formula. Possible values: 'original', 'modified', 'marzo2019_1', 'marzo2019_2'.</span>
<span class="sd">            Default is 'original'.</span>
<span class="sd">        occ_index_file : str, optional</span>
<span class="sd">            Path to the file containing the occurrence index with the following columns:</span>
<span class="sd">            "Lemma", "idFrase", "idParolaStart".</span>
<span class="sd">            If no value is passed, frequencies will be computed using NLTK text processing tools.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        None</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        weight_norm = WeightsNormalizer(burst_results=filtered_bursts,</span>
<span class="sd">                                        burst_pairs=burst_pairs,</span>
<span class="sd">                                        burst_weight_matrix=burst_weight_matrix)</span>
<span class="sd">        weight_norm.normalize(formula='original')</span>
<span class="sd">        normalized_weights = weight_norm.burst_norm.dataframe</span>
<span class="sd">        normalized_weights = normalized_weights.round(decimals=3)</span>
<span class="sd">        """</span>
        <span class="n">tot_len</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">sub_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">keyword</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">sub_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
            <span class="n">tot_len</span> <span class="o">+=</span> <span class="p">(</span><span class="n">sub_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">"end"</span><span class="p">]</span> <span class="o">-</span> <span class="n">sub_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">"start"</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="c1">#tot_len = (self._burst_results.where(self._burst_results['keyword'] == keyword).sum()['end'] -</span>
        <span class="c1">#           self._burst_results.where(self._burst_results['keyword'] == keyword).sum()['start'])</span>

        <span class="k">return</span> <span class="n">tot_len</span>

    <span class="k">def</span> <span class="nf">_single_burst_length</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">burst_id</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Compute the length of a single burst.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        burst_id : int</span>
<span class="sd">            The ID of the burst.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The length of the burst.</span>
<span class="sd">        """</span>

        <span class="n">sub_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">burst_id</span><span class="p">]</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">sub_df</span><span class="p">[</span><span class="s1">'end'</span><span class="p">]</span> <span class="o">-</span> <span class="n">sub_df</span><span class="p">[</span><span class="s1">'start'</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">length</span>

    <span class="k">def</span> <span class="nf">_total_length_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Finds the total length of bursts of y that have a relation with some burst of x.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        x : str</span>
<span class="sd">            The keyword for the first concept.</span>
<span class="sd">        y : str</span>
<span class="sd">            The keyword for the second concept.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The total length of related bursts.</span>
<span class="sd">        """</span>

        <span class="n">sub_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span><span class="p">[</span><span class="s2">"x"</span><span class="p">]</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span><span class="p">[</span><span class="s2">"y"</span><span class="p">]</span> <span class="o">==</span> <span class="n">y</span><span class="p">)]</span>
        <span class="c1"># delete duplicate bursts of Y</span>
        <span class="n">sub_df</span> <span class="o">=</span> <span class="n">sub_df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">'By_start'</span><span class="p">,</span> <span class="s1">'By_end'</span><span class="p">])</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">sub_df</span><span class="p">[</span><span class="s1">'By_end'</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">-</span> <span class="n">sub_df</span><span class="p">[</span><span class="s1">'By_start'</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">+</span> <span class="n">sub_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">length</span>

    <span class="c1">#def _word_frequency(self, keyword, start, end, occ_index_file: str=None):</span>
    <span class="k">def</span> <span class="nf">_word_frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keyword</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">sents_idx</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""</span>
<span class="sd">        Finds the frequency of a keyword in the portion of text between the limits of a burst.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        keyword : str</span>
<span class="sd">            The keyword for which to compute the frequency.</span>
<span class="sd">        start : int</span>
<span class="sd">            The start index of the burst.</span>
<span class="sd">        end : int</span>
<span class="sd">            The end index of the burst.</span>
<span class="sd">        sents_idx : pandas.DataFrame</span>
<span class="sd">            DataFrame containing the indexes of sentences where every concept occurs. It must have the following columns:</span>
<span class="sd">            "Lemma", "idFrase", "idParolaStart".</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The frequency of the keyword in the specified portion of text.</span>
<span class="sd">        """</span>

        <span class="n">freq</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1">#if occ_index_file is not None:</span>
        <span class="k">if</span> <span class="n">sents_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># use the occurrences provided in the index file to compute frequencies</span>
<span class="w">            </span><span class="sd">'''sents_idx = pd.read_csv(occ_index_file,</span>
<span class="sd">                                    index_col=0,</span>
<span class="sd">                                    usecols=["Lemma", "idFrase", "idParolaStart"],</span>
<span class="sd">                                    encoding="utf-8", sep="\t")'''</span>
            <span class="c1"># TODO: improve readability using .loc[[keyword]] that always returns a dataframe and thus avoid problems with .shape[0]</span>
            <span class="c1">#if type(sents_idx.loc[keyword]) == pd.Series:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">sents_idx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sents_idx</span><span class="p">[</span><span class="s1">'Lemma'</span><span class="p">]</span> <span class="o">==</span> <span class="n">keyword</span><span class="p">])</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
                <span class="c1"># there is only one occurrence</span>
                <span class="n">freq</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">occs_in_burst</span> <span class="o">=</span> <span class="n">sents_idx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sents_idx</span><span class="p">[</span><span class="s1">'Lemma'</span><span class="p">]</span> <span class="o">==</span> <span class="n">keyword</span><span class="p">][(</span><span class="n">sents_idx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sents_idx</span><span class="p">[</span><span class="s1">'Lemma'</span><span class="p">]</span> <span class="o">==</span> <span class="n">keyword</span><span class="p">]</span><span class="o">.</span><span class="n">idFrase</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">)</span> <span class="o">&amp;</span>
                                                   <span class="p">(</span><span class="n">sents_idx</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sents_idx</span><span class="p">[</span><span class="s1">'Lemma'</span><span class="p">]</span> <span class="o">==</span> <span class="n">keyword</span><span class="p">]</span><span class="o">.</span><span class="n">idFrase</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">)]</span>
                <span class="n">freq</span> <span class="o">=</span> <span class="n">occs_in_burst</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="w">        </span><span class="sd">'''else:</span>
<span class="sd">            # occurrences are not provided: use NLTK to compute frequencies</span>
<span class="sd">            # TODO SE2020: questa parte non dovrebbe servire in PRET</span>
<span class="sd">            with open(self._text_filename, 'r', encoding='utf-8') as text:</span>
<span class="sd">                splitted_text = nltk.sent_tokenize(str(text.read()))</span>

<span class="sd">                for sent in splitted_text[start:end + 1]:</span>
<span class="sd">                    freq += sent.upper().count(keyword.upper())'''</span>

        <span class="k">return</span> <span class="n">freq</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">burst_results</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">burst_weight_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">burst_norm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Getter of the final dataframe with normalized weights"""</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_norm" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">burst_norm</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter of the final dataframe with normalized weights</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">burst_results</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.burst_weight_matrix" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">burst_weight_matrix</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Getter</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">bursts</span><span class="p">,</span> <span class="n">burst_pairs</span><span class="p">,</span> <span class="n">burst_weight_matrix</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the WeightsNormalizer object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bursts</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing a burst for each row.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>burst_pairs</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame containing pairs of related bursts.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>burst_weight_matrix</code>
            </td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>DataFrame constructed from the weight-matrix generated from BurstAssigner.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bursts</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">burst_pairs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">burst_weight_matrix</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Initialize the WeightsNormalizer object.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    bursts : pandas.DataFrame</span>
<span class="sd">        DataFrame containing a burst for each row.</span>
<span class="sd">    burst_pairs : pandas.DataFrame</span>
<span class="sd">        DataFrame containing pairs of related bursts.</span>
<span class="sd">    burst_weight_matrix : pandas.DataFrame</span>
<span class="sd">        DataFrame constructed from the weight-matrix generated from BurstAssigner.</span>
<span class="sd">    """</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span> <span class="o">=</span> <span class="n">bursts</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_burst_pairs</span> <span class="o">=</span> <span class="n">burst_pairs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span> <span class="o">=</span> <span class="n">burst_weight_matrix</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="c1"># prepare a dataset with size: num_concepts x num_concepts</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span>
                                    <span class="n">index</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span>
                                    <span class="n">columns</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>

    <span class="c1"># TODO SE2020: potenzialmente da eliminare in PRET sempre per le stesse ragioni (serve per trovare le frequenze nel testo se non vengono forniti in input dati relativi all'analisi linguistica come quelli contenuti nel conll)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_text_filename</span> <span class="o">=</span> <span class="s2">""</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="/home/runner/work/ekeel/ekeel/EVA_apps.EKEELVideoAnnotation.burst.weight.WeightsNormalizer.normalize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">normalize</span><span class="p">(</span><span class="n">formula</span><span class="o">=</span><span class="s1">'original'</span><span class="p">,</span> <span class="n">occ_index_file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Normalize the burst weight matrix using the specified formula.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>formula</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Type of normalizing formula. Possible values: 'original', 'modified', 'marzo2019_1', 'marzo2019_2'.
Default is 'original'.</p>
              </div>
            </td>
            <td>
                  <code>'original'</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>occ_index_file</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to the file containing the occurrence index with the following columns:
"Lemma", "idFrase", "idParolaStart".
If no value is passed, frequencies will be computed using NLTK text processing tools.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>None</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>weight_norm = WeightsNormalizer(burst_results=filtered_bursts,
                                burst_pairs=burst_pairs,
                                burst_weight_matrix=burst_weight_matrix)
weight_norm.normalize(formula='original')
normalized_weights = weight_norm.burst_norm.dataframe
normalized_weights = normalized_weights.round(decimals=3)</p>

            <details class="quote">
              <summary>Source code in <code>EVA_apps/EKEELVideoAnnotation/burst/weight.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formula</span><span class="o">=</span><span class="s1">'original'</span><span class="p">,</span> <span class="n">occ_index_file</span><span class="p">:</span> <span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Normalize the burst weight matrix using the specified formula.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    formula : str, optional</span>
<span class="sd">        Type of normalizing formula. Possible values: 'original', 'modified', 'marzo2019_1', 'marzo2019_2'.</span>
<span class="sd">        Default is 'original'.</span>
<span class="sd">    occ_index_file : str, optional</span>
<span class="sd">        Path to the file containing the occurrence index with the following columns:</span>
<span class="sd">        "Lemma", "idFrase", "idParolaStart".</span>
<span class="sd">        If no value is passed, frequencies will be computed using NLTK text processing tools.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    None</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    weight_norm = WeightsNormalizer(burst_results=filtered_bursts,</span>
<span class="sd">                                    burst_pairs=burst_pairs,</span>
<span class="sd">                                    burst_weight_matrix=burst_weight_matrix)</span>
<span class="sd">    weight_norm.normalize(formula='original')</span>
<span class="sd">    normalized_weights = weight_norm.burst_norm.dataframe</span>
<span class="sd">    normalized_weights = normalized_weights.round(decimals=3)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">formula</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'original'</span><span class="p">,</span> <span class="s1">'modified'</span><span class="p">,</span> <span class="s1">'marzo2019_1'</span><span class="p">,</span> <span class="s1">'marzo2019_2'</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Error: the argument 'formula' must be either 'original' or 'modified'."</span><span class="p">)</span>

    <span class="c1"># reset dataframe to zeros if any value has been modified during a first call of the function</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="o">.</span><span class="n">ne</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c1"># precompute the word frequencies in their bursts</span>
    <span class="k">for</span> <span class="n">burst_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'start'</span><span class="p">]</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'end'</span><span class="p">]</span>
        <span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_word_frequency</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'keyword'</span><span class="p">],</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span>
                                    <span class="n">occ_index_file</span><span class="p">)</span>
        <span class="c1"># add the freq in a column of the same dataframe</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_id</span><span class="p">,</span> <span class="s1">'word freq'</span><span class="p">]</span> <span class="o">=</span> <span class="n">freq</span>

    <span class="c1"># precompute the total length of bursts of each word</span>
    <span class="n">tot_burst_len</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
        <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_total_length</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

    <span class="c1"># main body of the method: compare bursts and assign a normalized weight</span>

    <span class="c1"># for each word X</span>
    <span class="k">for</span> <span class="n">word_X</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>

        <span class="c1"># retrieve the list of indexes in the bursts df assigned to the bursts of word X</span>
        <span class="n">bursts_X_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_X</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="c1"># for each burst of word X</span>
        <span class="k">for</span> <span class="n">burst_X_i</span> <span class="ow">in</span> <span class="n">bursts_X_indexes</span><span class="p">:</span>
            <span class="c1"># don't consider the current burst if the entire row is zero</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="k">pass</span>

            <span class="n">other_words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">other_words</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">word_X</span><span class="p">)</span>

            <span class="c1"># for each word different from word X</span>
            <span class="k">for</span> <span class="n">word_Y</span> <span class="ow">in</span> <span class="n">other_words</span><span class="p">:</span>
                <span class="c1"># retrieve the list of indexes in the df assigned to the bursts of word Y</span>
                <span class="n">bursts_Y_indexes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_Y</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

                <span class="c1"># for each burst of this second word Y</span>
                <span class="k">for</span> <span class="n">burst_Y_j</span> <span class="ow">in</span> <span class="n">bursts_Y_indexes</span><span class="p">:</span>
                    <span class="c1"># don't consider the current burst if the entire column is zero</span>
                    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="p">[</span><span class="n">burst_Y_j</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                        <span class="k">pass</span>

                    <span class="c1"># if the two bursts are related:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">,</span> <span class="n">burst_Y_j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="c1"># retrieve the weight and freqs</span>
                        <span class="n">relation_weight_BX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_burst_weight_matrix</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">,</span> <span class="n">burst_Y_j</span><span class="p">]</span>
                        <span class="n">freq_BX</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_X_i</span><span class="p">,</span> <span class="s1">'word freq'</span><span class="p">]</span>
                        <span class="n">freq_BY</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">burst_Y_j</span><span class="p">,</span> <span class="s1">'word freq'</span><span class="p">]</span>

                        <span class="c1"># compute NRW using the chosen formula</span>
                        <span class="k">if</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'original'</span><span class="p">:</span>
                            <span class="n">NRW</span> <span class="o">=</span> <span class="p">(</span><span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BX</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_X</span><span class="p">])</span> <span class="o">*</span>
                                   <span class="p">(</span><span class="n">freq_BY</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_Y</span><span class="p">]))</span>
<span class="w">                            </span><span class="sd">"""</span>
<span class="sd">                            # per dare più peso a i pesi rispetto a lunghezze e frequenze</span>
<span class="sd">                            NRW = relation_weight_BX * ( (freq_BX / tot_burst_len[word_X]) +</span>
<span class="sd">                                   (freq_BY / tot_burst_len[word_Y])) </span>

<span class="sd">                            # per esaltare le parole meno frequenti</span>
<span class="sd">                            NRW = relation_weight_BX * ( (tot_burst_len[word_X] / freq_BX) +</span>
<span class="sd">                                   (tot_burst_len[word_Y] / freq_BY)) </span>
<span class="sd">                            """</span>
                        <span class="k">elif</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'modified'</span><span class="p">:</span>
                            <span class="c1"># find total number of bursts of these words</span>
                            <span class="c1"># TODO: (OPTIM) move it outside the loop</span>
                            <span class="n">num_bursts_X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_X</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">num_bursts_Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bursts</span><span class="p">[</span><span class="s1">'keyword'</span><span class="p">]</span> <span class="o">==</span> <span class="n">word_Y</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                            <span class="n">NRW</span> <span class="o">=</span> <span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">((</span><span class="n">freq_BX</span> <span class="o">*</span> <span class="n">num_bursts_X</span><span class="p">)</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_X</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span>
                                        <span class="p">(</span><span class="n">freq_BY</span> <span class="o">*</span> <span class="n">num_bursts_Y</span><span class="p">)</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_Y</span><span class="p">])</span>

                        <span class="k">elif</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'marzo2019_1'</span><span class="p">:</span>
                            <span class="c1"># freq(Y, Bj) / length of the single burst of Y under examination (i.e. BYj)</span>
                            <span class="n">BYj_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single_burst_length</span><span class="p">(</span><span class="n">burst_Y_j</span><span class="p">)</span>
                            <span class="n">NRW</span> <span class="o">=</span> <span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BX</span> <span class="o">/</span> <span class="n">tot_burst_len</span><span class="p">[</span><span class="n">word_X</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BY</span> <span class="o">/</span> <span class="n">BYj_len</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="n">formula</span> <span class="o">==</span> <span class="s1">'marzo2019_2'</span><span class="p">:</span>
                            <span class="c1"># similar to the previous but also for BXi</span>
                            <span class="n">BXi_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single_burst_length</span><span class="p">(</span><span class="n">burst_X_i</span><span class="p">)</span>
                            <span class="n">BYj_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_single_burst_length</span><span class="p">(</span><span class="n">burst_Y_j</span><span class="p">)</span>
                            <span class="n">NRW</span> <span class="o">=</span> <span class="n">relation_weight_BX</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BX</span> <span class="o">/</span> <span class="n">BXi_len</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">freq_BY</span> <span class="o">/</span> <span class="n">BYj_len</span><span class="p">)</span>


                        <span class="c1"># update the final matrix</span>
                        <span class="c1"># (i.e. sum the NRW between the current burst of word X</span>
                        <span class="c1"># and its related burst of word Y to the already stored weight between word X and word Y)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_burst_norm</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">word_X</span><span class="p">,</span> <span class="n">word_Y</span><span class="p">]</span> <span class="o">+=</span> <span class="n">NRW</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="about:void" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://ekeel.dibris.unige.it/" target="_blank" rel="noopener" title="ekeel.dibris.unige.it" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M162.4 196c4.8-4.9 6.2-5.1 36.4-5.1 27.2 0 28.1.1 32.1 2.1 5.8 2.9 8.3 7 8.3 13.6 0 5.9-2.4 10-7.6 13.4-2.8 1.8-4.5 1.9-31.1 2.1-16.4.1-29.5-.2-31.5-.8-10.3-2.9-14.1-17.7-6.6-25.3m61.4 94.5c-53.9 0-55.8.2-60.2 4.1-3.5 3.1-5.7 9.4-5.1 13.9.7 4.7 4.8 10.1 9.2 12 2.2 1 14.1 1.7 56.3 1.2l47.9-.6 9.2-1.5c9-5.1 10.5-17.4 3.1-24.4-5.3-4.7-5-4.7-60.4-4.7m223.4 130.1c-3.5 28.4-23 50.4-51.1 57.5-7.2 1.8-9.7 1.9-172.9 1.8-157.8 0-165.9-.1-172-1.8-8.4-2.2-15.6-5.5-22.3-10-5.6-3.8-13.9-11.8-17-16.4-3.8-5.6-8.2-15.3-10-22S0 420.3 0 256.3C0 93.2 0 89.7 1.8 82.6 8.1 57.9 27.7 39 53 33.4c7.3-1.6 332.1-1.9 340-.3 21.2 4.3 37.9 17.1 47.6 36.4 7.7 15.3 7-1.5 7.3 180.6.2 115.8 0 164.5-.7 170.5m-85.4-185.2c-1.1-5-4.2-9.6-7.7-11.5-1.1-.6-8-1.3-15.5-1.7-12.4-.6-13.8-.8-17.8-3.1-6.2-3.6-7.9-7.6-8-18.3 0-20.4-8.5-39.4-25.3-56.5-12-12.2-25.3-20.5-40.6-25.1-3.6-1.1-11.8-1.5-39.2-1.8-42.9-.5-52.5.4-67.1 6.2-27 10.7-46.3 33.4-53.4 62.4-1.3 5.4-1.6 14.2-1.9 64.3-.4 62.8 0 72.1 4 84.5 9.7 30.7 37.1 53.4 64.6 58.4 9.2 1.7 122.2 2.1 133.7.5 20.1-2.7 35.9-10.8 50.7-25.9 10.7-10.9 17.4-22.8 21.8-38.5 3.2-10.9 2.9-88.4 1.7-93.9"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.top", "navigation.tabs", "navigation.instant", "content.code.annotate", "content.code.copy", "content.tooltips"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  </body>
</html>